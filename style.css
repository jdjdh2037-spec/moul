/* style.css - تطوير "الكتاب المفتوح ثلاثي الأبعاد" (3D Open Sketchbook) */

/* @import لخطوط فنية ويدوية */
@import url('https://fonts.googleapis.com/css2?family=Reem+Kufi+Fun:wght@400..700&family=Amiri+Quran&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&family=Kufam:ital,wght@0,400..900;1,400..900&display=swap');

/* الخطوط والتجهيزات الأساسية - بيئة ثلاثية الأبعاد */
body {
    font-family: 'Kufam', 'Reem Kufi Fun', 'Cairo', sans-serif;
    background-color: #3e2723; /* خلفية أغمق (خشب غامق) */
    background-image: linear-gradient(135deg, #3e2723 25%, #4e342e 75%);
    color: #333333; 
    margin: 0;
    padding: 0;
    line-height: 1.7;
    min-height: 100vh;
    /* تحويل الجسم إلى مساحة 3D */
    perspective: 2000px;
    overflow-x: hidden;
    display: flex; /* لتوسيط الكتاب */
    justify-content: center;
    align-items: center;
}

.container {
    max-width: 950px; 
    width: 90%;
    margin: 50px 0;
    padding: 30px 40px;
    
    /* تصميم ورقي مع خطوط متقطعة (لتسهيل الرؤية) */
    background-color: #fffaf0; 
    background-image: 
        repeating-linear-gradient(to bottom, transparent, transparent 24px, #e1e1c9 25px);
    background-size: 100% 25px; 
    
    /* الخصائص ثلاثية الأبعاد للكتاب المفتوح */
    position: relative;
    border-radius: 4px 50px 50px 4px; /* زوايا منحنية للغلاف */
    
    /* رفع و دوران الكتاب */
    transform: rotateX(5deg) rotateY(5deg) rotateZ(-2deg) scale(0.95); 
    transform-style: preserve-3d;
    
    /* ظل الكتاب على الطاولة */
    box-shadow: 
        0 40px 80px rgba(0, 0, 0, 0.5), /* ظل سفلي كبير */
        0 0 20px rgba(0, 0, 0, 0.2) inset; /* ظل داخلي خفيف */
    
    /* خط الدفتر الأحمر/المثقب */
    border-right: 3px solid #f44336; 
}

/* ==================================
    تفاصيل الغلاف والعمود الفقري (3D Book Spine)
   ================================== */
.container::before {
    /* العمود الفقري (الغلاف) */
    content: '';
    position: absolute;
    top: -10px;
    right: -40px; /* سحب الغلاف للخارج */
    bottom: -10px;
    width: 50px;
    background-color: #6d4c41; /* لون جلد */
    border-radius: 0 10px 10px 0;
    /* دوران 3D للعمود الفقري */
    transform: rotateY(-30deg) translateZ(-20px); 
    transform-origin: left;
    box-shadow: 5px 0 10px rgba(0, 0, 0, 0.4);
    z-index: -1;
}

/* ==================================
    الهيدر - خطوط التظليل المبتكرة (Halftone)
   ================================== */
header {
    /* إضافة تأثير تظليل خطي (Halftone Filter) للخطوط */
    background-color: transparent; 
    color: #333333;
    padding: 0 0 20px 0;
    border-bottom: 2px dashed #999999; 
    margin-bottom: 30px;
    filter: drop-shadow(0 0 1px rgba(0, 0, 0, 0.1));
}

.logo {
    font-family: 'Caveat', cursive; 
    font-size: 4.5em; 
    color: #0c8a30; 
    /* تأثير Halftone (فلتر تظليل) */
    text-shadow: 
        1px 1px 0 #fff, 
        2px 2px 0 #bbb,
        3px 3px 0 #0c8a30;
    /* فلتر متقدم للمسة فنية */
    filter: url(#halftone-effect); 
}

/* تعريف فلتر Halftone في CSS (يتطلب SVG filter) - سنضيفه في HTML */

/* ==================================
    الأقسام (Sections) - الملصقات المُمزقة
   ================================== */
section {
    background-color: #ffffff; 
    padding: 25px;
    margin-bottom: 40px;
    /* شكل ممزق وغير منتظم مع ثقب يدوي */
    border-radius: 10px 25px 8px 18px / 15px 10px 20px 30px; 
    border: none;
    
    /* عمق أكبر للظل */
    box-shadow: 
        8px 8px 18px rgba(0, 0, 0, 0.3), 
        -3px -3px 5px rgba(255, 255, 255, 0.6) inset; 
    
    /* دوران عشوائي طفيف مع الحفاظ على المنظور */
    transform: rotate(calc(var(--i, 1) * -2deg)) translateZ(5px);
    transition: transform 0.3s ease-out;
}
section:hover {
    transform: rotate(0deg) translateZ(15px); /* رفع للاعلى عند التحويم */
    box-shadow: 15px 15px 30px rgba(0, 0, 0, 0.5);
}

.highlight {
    color: #c62828; 
    background-color: rgba(255, 255, 0, 0.7); 
    /* إضافة خط أسفل النص المظلل */
    box-shadow: inset 0 -3px 0 #c62828;
}

/* ==================================
    لوحة المشاعر - ملصقات بدبابيس تثبيت (Push Pins)
   ================================== */
.emotion-card {
    padding: 20px;
    position: relative;
    box-shadow: 5px 5px 0px rgba(0, 0, 0, 0.3); 
    transform: rotate(calc(var(--j, 0) * 2deg - 1deg)) translateZ(2px);
}

/* دبوس التثبيت (Push Pin) في الزاوية */
.emotion-card::after {
    content: '';
    position: absolute;
    top: -10px;
    right: -10px; 
    width: 12px;
    height: 12px;
    background-color: #ff5722; /* لون دبوس برتقالي لامع */
    border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5), 
                0 0 0 2px rgba(255, 255, 255, 0.8) inset; /* تأثير لمعان */
    z-index: 10;
}

/* ==================================
    منطقة الدردشة - فقاعات محاكة (Stitched Bubbles)
   ================================== */
.chat-area {
    background-color: #ffffff;
    border: 3px solid #666;
    box-shadow: 10px 10px 0px rgba(0, 0, 0, 0.4), 
                20px 20px 0px rgba(100, 100, 100, 0.1); 
    border-radius: 15px;
    padding: 15px;
    position: relative;
}

.chat-box p {
    margin: 15px 0;
    padding: 15px 20px;
    font-family: 'Caveat', cursive;
    box-shadow: none; 
    border: none; /* إزالة الحدود */
    position: relative;
    filter: drop-shadow(1px 1px 0 rgba(0, 0, 0, 0.15));
}

/* إضافة تأثير الخياطة اليدوية (Stitching Effect) */
.chat-box p::before {
    content: '';
    position: absolute;
    inset: 0;
    border: 2px dashed #90a4ae; /* لون الخيط الرمادي */
    border-radius: inherit;
    pointer-events: none; /* لمنع التأثير على تفاعلات النص */
    z-index: 1;
}

/* ==================================
    منطقة الإدخال والإرسال
   ================================== */
#user-input {
    /* تصميم أكثر نظافة وقلم رصاص */
    border: 3px solid #9e9e9e; 
    border-radius: 12px;
    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2); 
    font-family: 'Kufam', sans-serif;
}

/* زر الختم (Stamp Button) */
#send-button {
    background-color: #ff5722; /* لون ختم برتقالي */
    border: 3px solid #e64a19;
    box-shadow: 0 4px 0px #e64a19;
}
#send-button:active {
    box-shadow: 0 0px 0px #e64a19;
    transform: translateY(4px);
}
